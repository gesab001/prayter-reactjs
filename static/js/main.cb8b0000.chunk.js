(this.webpackJsonpprayter=this.webpackJsonpprayter||[]).push([[0],{30:function(e,n,t){},36:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(1),o=t(18),i=t.n(o),s=t(22),c=(t(30),t(19)),d=t(20),l=t(11),u=t(24),p=t(23),h=t(12);t(31),t(33);h.a.initializeApp({apiKey:"AIzaSyAE2tUZXM3GPw9Jjy3G5y4Fp7MINMaO-j8",authDomain:"pray-290920.firebaseapp.com",databaseURL:"https://pray-290920.firebaseio.com",projectId:"pray-290920",storageBucket:"pray-290920.appspot.com",messagingSenderId:"951976358196",appId:"1:951976358196:web:4686903027ee94f7ea3561",measurementId:"G-TRF9JGHQCR"});var g=h.a.auth(),j=h.a.firestore(),y=(t(36),function(e){Object(u.a)(t,e);var n=Object(p.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).componentDidMount=function(){g.onAuthStateChanged((function(e){null!=e&&(console.log(e.uid),a.setState({user:e}),a.unsubscribe=j.collection("rooms").doc("prayer").collection("private").doc(a.state.user.uid).collection("messages").orderBy("date","desc").limit(3).onSnapshot(a.onDataChange))}))},a.onChangeHandlerUsername=function(e){var n=e.currentTarget.value;a.setState({username:n})},a.onChangeHandlerPassword=function(e){var n=e.currentTarget.value;console.log("password: ",n),a.setState({password:n})},a.signInHandler=function(e){e.preventDefault(),g.signInWithEmailAndPassword(a.state.username,a.state.password).catch((function(e){console.log("Error signing in with password and email",e),a.setState({error:e})}))},a.signOutHandler=function(e){g.signOut(),a.setState({user:null}),window.location.reload(!1)},a.newPrayerHandler=function(e){var n="Dear heavenly Father, "+e.currentTarget.innerHTML+", in Jesus' name, Amen";a.setState({newprayer:n})},a.addPrayer=function(e){console.log("add: "+a.state.newprayer);var n=a.state.newprayer,t=Date.now();console.log("useruid: "+a.state.user.uid);var r=a.state.user.uid,o=j.collection("rooms").doc("prayer").collection("private").doc(r).collection("messages");o.add({author:a.state.user.email,userId:r,message:n,date:t,recurring:!1}).then((function(e){console.log(o,n,"private",t,r,e.id,!1)})).catch((function(e){console.error("Error adding document: ",e)}))},a.onDataChange=a.onDataChange.bind(Object(l.a)(a)),a.state={user:null,username:null,password:null,error:null,newprayer:null,prayerlist:[]},a.unsubscribe=void 0,a}return Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var n=this.state.prayerlist;e.docChanges().forEach((function(e){"added"===e.type&&(console.log("New prayer: ",e.doc.data()),n.unshift(e.doc.data())),"modified"===e.type&&console.log("Modified prayer: ",e.doc.data()),"removed"===e.type&&console.log("Removed prayer: ",e.doc.data())})),this.setState({prayerlist:n})}},{key:"viewPrayer",value:function(e){j.collection("rooms").doc("prayer").collection("private").doc(e).collection("messages").orderBy("date","desc").limit(3).onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&console.log("New prayer: ",e.doc.data()),"modified"===e.type&&console.log("Modified prayer: ",e.doc.data()),"removed"===e.type&&console.log("Removed prayer: ",e.doc.data())}))}))}},{key:"render",value:function(){var e=this;if(null===this.state.user)return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:this.signInHandler,children:[Object(a.jsx)("div",{children:"Username"}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{required:!0,type:"email",onChange:function(n){return e.onChangeHandlerUsername(n)}})}),Object(a.jsx)("div",{children:"Password"}),Object(a.jsx)("input",{type:"password",required:!0,onChange:function(n){return e.onChangeHandlerPassword(n)}}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"submit",value:"Sign in"})})]})});var n=this.state.prayerlist;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"button",onClick:function(n){e.signOutHandler(n)},children:"Sign out "}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"New prayer"}),Object(a.jsx)("div",{children:"Dear heavenly Father, "}),Object(a.jsx)("div",{contentEditable:!0,onInput:function(n){return e.newPrayerHandler(n)}}),Object(a.jsx)("div",{children:"in Jesus' name, Amen."}),Object(a.jsx)("button",{onClick:function(n){e.addPrayer(n)},children:"Send"}),Object(a.jsx)("button",{onClick:function(n){e.viewPrayer(e.state.user.uid)},children:"View prayers"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("ul",{className:"list-group",children:n&&n.map((function(e,n){return Object(a.jsx)("li",{children:e.message})}))})})]})}}]),t}(r.Component)),m=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),a(e),r(e),o(e),i(e)}))};i.a.render(Object(a.jsx)(s.a,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),m()}},[[41,1,2]]]);
//# sourceMappingURL=main.cb8b0000.chunk.js.map