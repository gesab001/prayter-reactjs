(this.webpackJsonpprayter=this.webpackJsonpprayter||[]).push([[0],{30:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(2),i=n(22),o=n.n(i),c=n(24),s=(n(30),n(9)),d=n(10),u=n(13),l=n(12),h=n(16);n(31),n(33);h.a.initializeApp({apiKey:"AIzaSyAE2tUZXM3GPw9Jjy3G5y4Fp7MINMaO-j8",authDomain:"pray-290920.firebaseapp.com",databaseURL:"https://pray-290920.firebaseio.com",projectId:"pray-290920",storageBucket:"pray-290920.appspot.com",messagingSenderId:"951976358196",appId:"1:951976358196:web:4686903027ee94f7ea3561",measurementId:"G-TRF9JGHQCR"});var j=h.a.auth(),f=h.a.firestore(),g=function(e,t){console.log("add: "+e);var n=f.collection("rooms").doc(e).collection("private").doc(t.userId).collection("messages");n.add({author:t.author,userId:t.userId,message:t.message,date:t.date,recurring:t.recurring}).then((function(e){console.log(n,t.message,"private",t.date,t.userId,e.id,t.recurring)})).catch((function(e){console.error("Error adding document: ",e)}))},m=function(e,t,n){f.collection("rooms").doc(e).collection("private").doc(t).collection("messages").doc(n).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},p=(n(36),n(11)),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.unsubscribe=f.collection("rooms").doc("fasting").collection("private").doc(j.currentUser.uid).collection("messages").orderBy("date","desc").onSnapshot(r.onDataChange)},r.newFastHandler=function(e){var t="Dear heavenly Father, help me to fast from "+e.currentTarget.innerHTML+" for 60 days, in Jesus' name, Amen";r.setState({newfast:t})},r.addFast=function(e){console.log("add: "+r.state.newfast);var t=j.currentUser.email,n=j.currentUser.uid,a=r.state.newfast,i=Date.now();g("fasting",{author:t,userId:n,message:a,date:i,recurring:!1})},r.deleteFast=function(e,t){console.log("remove: "+t);var n=j.currentUser.uid;m("fasting",n,t)},r.getDate=function(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)},r.getEndDate=function(e){e+=5184e6;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)},r.onDataChange=r.onDataChange.bind(Object(p.a)(r)),r.state={newfast:null,fastlist:[],inputField:null},r.unsubscribe=void 0,r}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=this.state.fastlist;e.docChanges().forEach((function(e){var n={id:e.doc.id,item:e.doc.data()};if("added"===e.type&&(console.log("New prayer: ",e.doc.id),t.unshift(n)),"modified"===e.type&&console.log("Modified prayer: ",e.doc.data()),"removed"===e.type){console.log("Removed prayer: ",e.doc.data());var r=t.filter((function(e,t,r){return e.id!=n.id}));t=r}})),this.setState({fastlist:t})}},{key:"render",value:function(){var e=this,t=this.state.fastlist;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"New fast"}),Object(r.jsx)("div",{children:"Dear heavenly Father, help me to fast from  "}),Object(r.jsx)("div",{contentEditable:!0,onInput:function(t){return e.newFastHandler(t)}}),Object(r.jsx)("div",{children:"for 60 days, in Jesus' name, Amen."}),Object(r.jsx)("button",{onClick:function(t){e.addFast(t)},children:"Send"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:t&&t.map((function(t,n){return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{children:["Start: ",e.getDate(t.item.date)," End: ",e.getEndDate(t.item.date)]}),Object(r.jsx)("p",{children:t.item.message}),Object(r.jsx)("button",{onClick:function(n){e.deleteFast(n,t.id)},children:"Delete"})]})})}))})})]})}}]),n}(a.Component),v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.unsubscribe=f.collection("rooms").doc("prayer").collection("private").doc(j.currentUser.uid).collection("messages").orderBy("date","desc").limit(3).onSnapshot(r.onDataChange)},r.newprayerHandler=function(e){var t="Dear heavenly Father,  "+e.currentTarget.innerHTML+" in Jesus' name, Amen";r.setState({newprayer:t})},r.addPrayer=function(e){console.log("add: "+r.state.newprayer);var t=j.currentUser.email,n=j.currentUser.uid,a=r.state.newprayer,i=Date.now();g("prayer",{author:t,userId:n,message:a,date:i,recurring:!1})},r.deletePrayer=function(e,t){console.log("remove: "+t);var n=j.currentUser.uid;m("prayer",n,t)},r.onDataChange=r.onDataChange.bind(Object(p.a)(r)),r.state={newprayer:null,prayerlist:[]},r.unsubscribe=void 0,r}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=this.state.prayerlist;e.docChanges().forEach((function(e){var n={id:e.doc.id,item:e.doc.data()};if("added"===e.type&&(console.log("New prayer: ",e.doc.data()),t.unshift(n)),"modified"===e.type&&console.log("Modified prayer: ",e.doc.data()),"removed"===e.type){console.log("Removed prayer: ",e.doc.data());var r=t.filter((function(e,t,r){return e.id!=n.id}));t=r}})),this.setState({prayerlist:t})}},{key:"render",value:function(){var e=this,t=this.state.prayerlist;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"New prayer"}),Object(r.jsx)("div",{children:"Dear heavenly Father, "}),Object(r.jsx)("div",{contentEditable:!0,onInput:function(t){return e.newprayerHandler(t)}}),Object(r.jsx)("div",{children:"in Jesus' name, Amen."}),Object(r.jsx)("button",{onClick:function(t){e.addPrayer(t)},children:"Send"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:t&&t.map((function(t,n){return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:t.item.message}),Object(r.jsx)("button",{onClick:function(n){e.deletePrayer(n,t.id)},children:"Delete"})]})})}))})})]})}}]),n}(a.Component),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){j.onAuthStateChanged((function(e){null!=e&&(console.log(e.uid),a.setState({user:e}))}))},a.onChangeHandlerUsername=function(e){var t=e.currentTarget.value;a.setState({username:t})},a.onChangeHandlerPassword=function(e){var t=e.currentTarget.value;console.log("password: ",t),a.setState({password:t})},a.signInHandler=function(e){e.preventDefault(),j.signInWithEmailAndPassword(a.state.username,a.state.password).catch((function(e){console.log("Error signing in with password and email",e),a.setState({error:e})}))},a.onViewChange=function(e){e.preventDefault(),a.setState({view:e.currentTarget.value})},a.signOutHandler=function(e){j.signOut(),a.setState({user:null}),window.location.reload(!1)},a.renderSwitch=function(e){switch(e){case"fasting":return Object(r.jsx)(b,{});default:return Object(r.jsx)(v,{})}},a.state={user:null,username:null,password:null,error:null,view:"prayer"},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;if(null===this.state.user)return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:this.signInHandler,children:[Object(r.jsx)("div",{children:"Username"}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{required:!0,type:"email",onChange:function(t){return e.onChangeHandlerUsername(t)}})}),Object(r.jsx)("div",{children:"Password"}),Object(r.jsx)("input",{type:"password",required:!0,onChange:function(t){return e.onChangeHandlerPassword(t)}}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"submit",value:"Sign in"})})]})});var t=this.state,n=(t.prayerlist,t.view);return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"button",onClick:function(t){e.signOutHandler(t)},children:"Sign out "}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["Prayer",Object(r.jsx)("input",{type:"radio",id:"prayer",name:"view",value:"prayer",onChange:function(t){return e.onViewChange(t)}})]}),Object(r.jsxs)("label",{children:["Fasting",Object(r.jsx)("input",{type:"radio",id:"fasting",name:"view",value:"fasting",onChange:function(t){return e.onViewChange(t)}})]})]}),this.renderSwitch(n)]})}}]),n}(a.Component),O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(r.jsx)(c.a,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),O()}},[[41,1,2]]]);
//# sourceMappingURL=main.cde1fd5e.chunk.js.map